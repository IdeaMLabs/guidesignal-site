<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Updated: 2025-01-23 with radio buttons and readability fixes -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    
    <!-- Cross-browser detection and compatibility -->
    <script>
        // Browser and mobile device detection for compatibility fixes
        (function() {
            var isIE = false || !!document.documentMode;
            var isEdge = !isIE && !!window.StyleMedia;
            var isFirefox = typeof InstallTrigger !== 'undefined';
            var isChrome = !!window.chrome && (!!window.chrome.webstore || !!window.chrome.runtime);
            var isSafari = /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === "[object SafariRemoteNotification]"; })(!window['safari'] || (typeof safari !== 'undefined' && safari.pushNotification));

            // Mobile device detection
            var isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            var isAndroid = /Android/i.test(navigator.userAgent);
            var isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

            // Mobile viewport height fix
            if (isMobile || isTouchDevice) {
                function setMobileVH() {
                    var vh = window.innerHeight * 0.01;
                    document.documentElement.style.setProperty('--vh', vh + 'px');
                }
                setMobileVH();

                if (window.addEventListener) {
                    window.addEventListener('resize', setMobileVH);
                    window.addEventListener('orientationchange', function() {
                        setTimeout(setMobileVH, 100);
                    });
                } else if (window.attachEvent) {
                    window.attachEvent('onresize', setMobileVH);
                }
            }

            // Add browser and device classes to body for CSS targeting
            function addClasses() {
                var body = document.body || document.getElementsByTagName('body')[0];
                if (!body) return;

                if (isIE) body.className += ' ie-browser';
                if (isEdge) body.className += ' edge-browser';
                if (isFirefox) body.className += ' firefox-browser';
                if (isChrome) body.className += ' chrome-browser';
                if (isSafari) body.className += ' safari-browser';
                if (isMobile) body.className += ' mobile-device';
                if (isIOS) body.className += ' ios-device';
                if (isAndroid) body.className += ' android-device';
                if (isTouchDevice) body.className += ' touch-device';
            }

            // Add classes when DOM is ready
            if (document.readyState === 'loading') {
                if (document.addEventListener) {
                    document.addEventListener('DOMContentLoaded', addClasses);
                } else if (document.attachEvent) {
                    document.attachEvent('onreadystatechange', function() {
                        if (document.readyState === 'complete') addClasses();
                    });
                }
            } else {
                addClasses();
            }

            // Fallback for window load
            if (window.addEventListener) {
                window.addEventListener('load', addClasses);
            } else if (window.attachEvent) {
                window.attachEvent('onload', function() {
                    addClasses();
                    var body = document.body;
                    if (isIE && body) body.className += ' ie-fallback';
                });
            }
        })();
    </script>

    <!-- Simplified domain handling to prevent reload loops -->
    <script>
        // Simplified domain handling - no redirects during auth flow
        (function() {
            var isDev = location.hostname === 'localhost' ||
                       location.hostname === '127.0.0.1' ||
                       location.hostname.startsWith('192.168.') ||
                       location.hostname.endsWith('.local');

            // Skip all redirects in development or during auth
            if (isDev || location.pathname.includes('auth')) {
                console.log('Skipping redirects for auth page');
                return;
            }

            // Only handle HTTPS upgrade, no domain redirects during auth
            if (location.protocol === 'http:' && !isDev) {
                var httpsUrl = 'https://' + location.hostname + location.pathname + location.search + location.hash;
                console.log('Upgrading to HTTPS:', httpsUrl);
                window.location.replace(httpsUrl);
            }
        })();
    </script>
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <meta name="description" content="Sign in or sign up for GuideSignal - Connect students with fast-reply employers">
    <meta name="robots" content="noindex, nofollow">
    
    <!-- Simplified Security - reduce potential conflicts -->
    <script src="assets/security-config.js" defer onerror="console.log('Security config not loaded')"></script>
    
    <!-- Shared CSS -->
    <link rel="stylesheet" href="assets/shared.css">
    <!-- Layout and logo fixes -->
    <link rel="stylesheet" href="assets/layout-fixes.css">
    <!-- GUI layout fixes for positioning issues -->
    <link rel="stylesheet" href="assets/gui-layout-fixes.css">
    
    <title>Sign In - GuideSignal</title>
    <!-- Password toggle fix deployed: 2025-01-08 16:45 UTC -->
    <meta name="cache-bust" content="password-toggle-fix-v1-20250108-1645">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <style>
        /* CSS Variables with IE11 fallbacks */
        :root {
            /* Color variables */
            --primary-50: #eff6ff;
            --primary-500: #4a9eff;
            --primary-600: #2563eb;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-600: #4b5563;
            --gray-900: #111827;

            /* Spacing variables */
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-6: 1.5rem;
            --space-8: 2rem;

            /* Border radius */
            --radius: 0.375rem;
            --radius-lg: 0.5rem;
            --radius-xl: 0.75rem;

            /* Shadows with cross-browser support */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

            /* Transitions */
            --transition: all 0.2s ease;
        }

        /* IE11 and older browser fallbacks */
        .ie-fallback {
            /* Color fallbacks */
            color: #111827;
            background-color: #f9fafb;
        }

        .ie-fallback .auth-card {
            background-color: #ffffff;
            border: 1px solid #e5e7eb;
            padding: 2rem;
        }

        .ie-fallback .btn {
            background-color: #4a9eff;
            color: #ffffff;
            padding: 0.75rem 1rem;
        }
        
        /* Auth page specific styles with cross-browser compatibility */
        body {
            /* Cross-browser gradient support */
            background: #f9fafb; /* Fallback for IE */
            background: -webkit-linear-gradient(135deg, var(--gray-50) 0%, var(--primary-50) 100%);
            background: -moz-linear-gradient(135deg, var(--gray-50) 0%, var(--primary-50) 100%);
            background: -ms-linear-gradient(135deg, var(--gray-50) 0%, var(--primary-50) 100%);
            background: -o-linear-gradient(135deg, var(--gray-50) 0%, var(--primary-50) 100%);
            background: linear-gradient(135deg, var(--gray-50) 0%, var(--primary-50) 100%);

            /* Cross-browser flexbox support */
            display: -webkit-box;      /* Safari 6.1+ */
            display: -webkit-flex;     /* Safari 6.1+ */
            display: -moz-box;         /* Firefox 19 */
            display: -ms-flexbox;      /* IE 10 */
            display: flex;

            -webkit-box-align: center;
            -webkit-align-items: center;
            -moz-box-align: center;
            -ms-flex-align: center;
            align-items: center;

            -webkit-box-pack: center;
            -webkit-justify-content: center;
            -moz-box-pack: center;
            -ms-flex-pack: center;
            justify-content: center;

            min-height: 100vh;
            min-height: -webkit-fill-available; /* Safari mobile fix */
        }
        
        .auth-container {
            width: 100%;
            max-width: 400px;
            padding: var(--space-4);
        }
        
        .auth-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-8);
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--gray-200);
        }
        
        .auth-logo {
            width: 64px;
            height: 64px;
            margin: 0 auto var(--space-6);
            background: var(--primary-500);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .auth-title {
            text-align: center;
            margin-bottom: var(--space-6);
            color: var(--gray-900);
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        /* Mobile and responsive design fixes */
        @media (max-width: 768px) {
            body {
                /* Mobile viewport fixes */
                min-height: 100vh;
                min-height: calc(var(--vh, 1vh) * 100); /* Mobile viewport fix */
                min-height: -webkit-fill-available;
                min-height: stretch;
                padding: 0;
                margin: 0;
                overflow-x: hidden;
            }

            .auth-container {
                padding: var(--space-3);
                min-height: 100vh;
                min-height: calc(var(--vh, 1vh) * 100); /* Mobile viewport fix */
                min-height: -webkit-fill-available;
                display: flex;
                flex-direction: column;
                justify-content: center;
                box-sizing: border-box;
            }

            .auth-card {
                padding: var(--space-6);
                margin: var(--space-4) 0;
                border-radius: var(--radius-lg);
                max-width: 100%;
                box-sizing: border-box;
            }

            /* Mobile form improvements */
            .form-input {
                font-size: 16px !important; /* Prevent zoom on iOS */
                padding: 12px 16px;
                min-height: 44px; /* Touch target size */
            }

            .btn {
                min-height: 48px; /* Touch target size */
                font-size: 16px;
                padding: 12px 24px;
            }

            /* Mobile role selector */
            .role-option {
                padding: 16px 12px;
                min-height: 60px;
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .role-radio {
                width: 20px;
                height: 20px;
                min-width: 20px;
                min-height: 20px;
            }

            /* Mobile password toggle */
            .password-toggle {
                min-width: 44px !important;
                min-height: 44px !important;
                font-size: 18px !important;
                right: 8px !important;
                touch-action: manipulation;
            }
        }

        @media (max-width: 480px) {
            .auth-container {
                padding: var(--space-2);
            }

            .auth-card {
                padding: var(--space-4);
                margin: var(--space-2) 0;
            }

            .auth-title {
                font-size: 1.25rem;
            }

            /* Smaller form elements for very small screens */
            .form-input {
                padding: 10px 12px;
            }
        }

        /* Touch device optimizations */
        @media (hover: none) and (pointer: coarse) {
            .password-toggle:hover {
                color: #6b7280 !important;
                opacity: 1 !important;
            }

            .role-option:hover {
                transform: none;
                background: var(--gray-50);
            }

            .btn:hover {
                transform: none;
            }
        }
        
        .auth-tabs {
            /* Cross-browser flexbox */
            display: -webkit-box;
            display: -webkit-flex;
            display: -moz-box;
            display: -ms-flexbox;
            display: flex;

            margin-bottom: var(--space-6);
            background: var(--gray-100);

            /* Cross-browser border-radius */
            -webkit-border-radius: var(--radius);
            -moz-border-radius: var(--radius);
            border-radius: var(--radius);

            padding: 4px;
        }
        
        .auth-tab {
            /* Cross-browser flex */
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            -moz-box-flex: 1;
            -ms-flex: 1;
            flex: 1;

            padding: var(--space-3);
            text-align: center;
            background: transparent;
            border: none;

            /* Cross-browser border-radius with calc fallback */
            border-radius: 4px; /* IE fallback */
            -webkit-border-radius: calc(var(--radius) - 2px);
            -moz-border-radius: calc(var(--radius) - 2px);
            border-radius: calc(var(--radius) - 2px);

            cursor: pointer;
            font-weight: 500;
            color: var(--gray-600);

            /* Cross-browser transitions */
            -webkit-transition: var(--transition);
            -moz-transition: var(--transition);
            -ms-transition: var(--transition);
            -o-transition: var(--transition);
            transition: var(--transition);

            font-family: inherit;
        }
        
        .auth-tab.active {
            background: white;
            color: var(--primary-600);
            box-shadow: var(--shadow-sm);
        }
        
        .back-link {
            position: absolute;
            top: var(--space-4);
            left: var(--space-4);
            color: var(--primary-500);
            text-decoration: none;
            font-weight: 500;
        }
        
        .back-link:hover {
            text-decoration: underline;
        }
        
        /* Role Selection Styles with Clear Visual Check System */
        .role-selector {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 8px;
        }
        
        .role-option {
            position: relative;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: 16px;
            cursor: pointer;
            background: white;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .role-radio {
            width: 22px;
            height: 22px;
            margin: 0;
            cursor: pointer;
            accent-color: var(--primary-500);
            flex-shrink: 0;
        }
        
        .role-radio:checked + .role-content .role-title {
            color: var(--primary-600);
        }
        
        .role-radio:hover {
            accent-color: var(--primary-600);
        }
        
        .role-option:hover {
            border-color: var(--primary-500);
            background: #f8fafc;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(74, 158, 255, 0.15);
        }
        
        .role-content {
            flex: 1;
        }
        
        .role-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .role-desc {
            font-size: 14px;
            color: #666;
            line-height: 1.4;
        }
        
        /* Selected State Styling */
        .role-option.selected {
            border-color: var(--primary-500);
            background: #f0f8ff;
            box-shadow: 0 4px 12px rgba(74, 158, 255, 0.2);
        }
        
        .role-option.selected .role-title {
            color: var(--primary-600);
        }
        
        .role-option.selected .role-desc {
            color: #555;
        }
        
        /* Animation for selection change */
        .role-option.deselecting {
            transform: scale(0.98);
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .role-option {
                padding: 14px;
            }
            
            .role-title {
                font-size: 15px;
            }
            
            .role-desc {
                font-size: 13px;
            }
            
            .role-radio {
                width: 18px;
                height: 18px;
            }
        }
        
        /* Password Container and Toggle Styles */
        .password-container {
            position: relative;
            /* Cross-browser flexbox */
            display: -webkit-box;
            display: -webkit-flex;
            display: -moz-box;
            display: -ms-flexbox;
            display: flex;

            -webkit-box-align: center;
            -webkit-align-items: center;
            -moz-box-align: center;
            -ms-flex-align: center;
            align-items: center;
        }
        
        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;

            /* Cross-browser transform */
            -webkit-transform: translateY(-50%);
            -moz-transform: translateY(-50%);
            -ms-transform: translateY(-50%);
            -o-transform: translateY(-50%);
            transform: translateY(-50%);

            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            font-size: 16px;
            color: #6b7280;
            z-index: 10; /* Increased z-index for better visibility */

            /* Cross-browser transitions */
            -webkit-transition: color 0.2s ease;
            -moz-transition: color 0.2s ease;
            -ms-transition: color 0.2s ease;
            -o-transition: color 0.2s ease;
            transition: color 0.2s ease;

            /* Cross-browser user-select */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;

            /* Ensure visibility across browsers */
            display: inline-block;
            min-width: 24px;
            min-height: 24px;
            line-height: 1;
        }
        
        .password-toggle:hover {
            color: #374151;
        }
        
        .password-toggle:focus {
            outline: 2px solid #4a9eff;
            outline-offset: 2px;
            border-radius: 4px;
        }
        
        /* Adjust input padding to make room for toggle button */
        .password-container .form-input {
            padding-right: 45px !important;
            position: relative;
            z-index: 1;
        }

        /* Simplified password toggle - remove !important overuse */
        .password-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            z-index: 10;

            display: flex;
            align-items: center;
            justify-content: center;

            width: 32px;
            height: 32px;

            background: transparent;
            border: none;
            cursor: pointer;

            font-size: 18px;
            color: #6b7280;

            transform: translateY(-50%);
            transition: color 0.2s ease;
        }

        .password-toggle:hover {
            color: #374151;
        }

        .password-toggle:focus {
            outline: 2px solid #4a9eff;
            outline-offset: 2px;
            border-radius: 4px;
        }

        .password-container .form-input {
            padding-right: 45px;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .password-toggle {
                width: 44px;
                height: 44px;
                font-size: 20px;
                touch-action: manipulation;
            }
        }
    </style>
</head>
<body>
    <!-- Skip links -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <main id="main-content">
        <div class="auth-container">
        <a href="/" class="back-link">← Back to Home</a>
        
        <div class="auth-card">
            <div class="auth-logo">GS</div>
            <h1 class="auth-title">Welcome to GuideSignal</h1>

            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchTab('signin', this)">Sign In</button>
                <button class="auth-tab" onclick="switchTab('signup-choice', this)">Sign Up</button>
            </div>

            <div id="error-message" class="error-message" style="display: none;"></div>
            <div id="success-message" class="success-message" style="display: none;"></div>

        <!-- Sign In Form -->
        <form id="signin-form" class="auth-form">
            <div class="form-group">
                <label class="form-label">Email Address</label>
                <input type="email" class="form-input" id="signin-email" required>
                <div class="field-error" id="signin-email-error"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Password</label>
                <div class="password-container">
                    <input type="password" class="form-input" id="signin-password" required>
                    <button type="button" class="password-toggle" onclick="togglePassword('signin-password')">
                        👁️
                    </button>
                </div>
                <div class="field-error" id="signin-password-error"></div>
            </div>
            
            <div class="remember-me">
                <input type="checkbox" id="remember-me">
                <label for="remember-me">Remember me</label>
            </div>
            
            <div class="forgot-password">
                <a href="#" onclick="showForgotPassword()">Forgot password?</a>
            </div>
            
            <button type="submit" class="btn" id="signin-btn">
                <span class="btn-text">Sign In</span>
            </button>
        </form>

        <!-- Sign Up Role Selection -->
        <div id="signup-choice" class="auth-form" style="display: none;">
            <div style="text-align: center; margin-bottom: 24px;">
                <h2 style="color: var(--gray-900); font-size: 1.25rem; font-weight: 600; margin-bottom: 8px;">I am a...</h2>
                <p style="color: var(--gray-600); font-size: 0.9rem;">Choose your account type to get started</p>
            </div>

            <div class="role-selector" style="gap: 16px;">
                <label class="role-option" style="justify-content: flex-start; text-align: left; padding: 20px; cursor: pointer;">
                    <input type="radio" name="signup-role" value="student" class="role-radio" style="margin-right: 12px;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="font-size: 2rem;">🎓</div>
                        <div>
                            <div style="font-size: 18px; font-weight: 600; color: var(--gray-900); margin-bottom: 4px;">Student</div>
                            <div style="font-size: 14px; color: var(--gray-600);">Looking for internships and entry-level opportunities</div>
                        </div>
                    </div>
                </label>

                <label class="role-option" style="justify-content: flex-start; text-align: left; padding: 20px; cursor: pointer;">
                    <input type="radio" name="signup-role" value="job_seeker" class="role-radio" style="margin-right: 12px;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="font-size: 2rem;">💼</div>
                        <div>
                            <div style="font-size: 18px; font-weight: 600; color: var(--gray-900); margin-bottom: 4px;">Job Seeker</div>
                            <div style="font-size: 14px; color: var(--gray-600);">Seeking new career opportunities</div>
                        </div>
                    </div>
                </label>

                <label class="role-option" style="justify-content: flex-start; text-align: left; padding: 20px; cursor: pointer;">
                    <input type="radio" name="signup-role" value="recruiter" class="role-radio" style="margin-right: 12px;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="font-size: 2rem;">🗂️</div>
                        <div>
                            <div style="font-size: 18px; font-weight: 600; color: var(--gray-900); margin-bottom: 4px;">Recruiter</div>
                            <div style="font-size: 14px; color: var(--gray-600);">Posting jobs and hiring talent</div>
                        </div>
                    </div>
                </label>
            </div>

            <button type="button" class="btn" onclick="proceedToSignup()" style="margin-top: 24px; width: 100%;">
                <span class="btn-text">Continue</span>
            </button>
        </div>

        <!-- Sign Up Form -->
        <form id="signup-form" class="auth-form" style="display: none;">
            <div class="form-group">
                <label class="form-label">Full Name</label>
                <input type="text" class="form-input" id="signup-name" required minlength="2">
                <div class="field-error" id="signup-name-error"></div>
                <div class="field-success" id="signup-name-success"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Email Address</label>
                <input type="email" class="form-input" id="signup-email" required>
                <div class="field-error" id="signup-email-error"></div>
                <div class="field-success" id="signup-email-success"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Password</label>
                <div class="password-container">
                    <input type="password" class="form-input" id="signup-password" required minlength="8">
                    <button type="button" class="password-toggle" onclick="togglePassword('signup-password')">
                        👁️
                    </button>
                </div>
                <div class="field-error" id="signup-password-error"></div>
                <div class="password-strength" id="password-strength" style="display: none;">
                    <div class="strength-bar">
                        <div class="strength-fill" id="strength-fill"></div>
                    </div>
                    <div class="strength-text" id="strength-text"></div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Confirm Password</label>
                <div class="password-container">
                    <input type="password" class="form-input" id="signup-password-confirm" required>
                    <button type="button" class="password-toggle" onclick="togglePassword('signup-password-confirm')">
                        👁️
                    </button>
                </div>
                <div class="field-error" id="signup-password-confirm-error"></div>
                <div class="field-success" id="signup-password-confirm-success"></div>
            </div>
            
            <!-- Selected Role (hidden input) -->
            <input type="hidden" id="selected-role" name="role" required>
            <div style="margin-bottom: 16px; padding: 12px; background: var(--gray-50); border-radius: var(--radius); text-align: center;">
                <span style="color: var(--gray-600); font-size: 14px;">Signing up as: </span>
                <strong id="role-display" style="color: var(--primary-600);"></strong>
                <button type="button" onclick="switchTab('signup-choice', document.querySelector('.auth-tab:not(.active)'))" style="margin-left: 12px; background: none; border: none; color: var(--primary-500); text-decoration: underline; cursor: pointer; font-size: 14px;">Change</button>
            </div>

            <!-- Role-Specific Fields Container -->
            <div id="role-specific-fields"></div>
            
            <div class="form-group" style="margin-top: 10px;">
                <label style="display: flex; align-items: flex-start; gap: 8px; font-size: 14px; color: #6c757d; line-height: 1.4;">
                    <input type="checkbox" id="terms-agreement" required style="margin-top: 2px; flex-shrink: 0;">
                    <span>I agree to the <a href="/terms.html" target="_blank" style="color: #4a9eff; text-decoration: none;">Terms</a> and <a href="/privacy.html" target="_blank" style="color: #4a9eff; text-decoration: none;">Privacy Policy</a></span>
                </label>
            </div>
            
            <button type="submit" class="btn" id="signup-btn" disabled>
                <span class="btn-text">Create Account</span>
            </button>
        </form>
        </div>
    </main>

    <script>
    // Simplified password toggle initialization
    window.initializePasswordToggles = function() {
        console.log('Initializing password toggles...');

        var containers = document.querySelectorAll('.password-container');
        for (var i = 0; i < containers.length; i++) {
            var container = containers[i];
            var input = container.querySelector('input[type="password"]');
            var toggle = container.querySelector('.password-toggle');

            if (input && toggle) {
                // Ensure proper styling
                container.style.position = 'relative';
                toggle.style.position = 'absolute';
                toggle.style.right = '12px';
                toggle.style.top = '50%';
                toggle.style.transform = 'translateY(-50%)';
                toggle.style.zIndex = '10';
                toggle.style.display = 'flex';
                toggle.style.alignItems = 'center';
                toggle.style.justifyContent = 'center';
                console.log('Password toggle initialized for:', input.id);
            }
        }
    };

    // Simple mobile-safe password toggle function
    window.togglePassword = function(inputId) {
        console.log('Toggling password for:', inputId);

        var input = document.getElementById(inputId);
        if (!input) {
            console.error('Input not found:', inputId);
            return;
        }

        var container = input.closest('.password-container');
        var toggle = container ? container.querySelector('.password-toggle') : null;

        if (!toggle) {
            console.error('Toggle button not found for:', inputId);
            return;
        }

        if (input.type === 'password') {
            input.type = 'text';
            toggle.textContent = '🙈';
            toggle.setAttribute('aria-label', 'Hide password');
        } else {
            input.type = 'password';
            toggle.textContent = '👁️';
            toggle.setAttribute('aria-label', 'Show password');
        }
    };

    // Essential tab switching function - mobile compatible
    window.switchTab = function(tab, clickedElement) {
        console.log('Switching to tab:', tab);

        // Update tab buttons
        var tabs = document.querySelectorAll('.auth-tab');
        for (var i = 0; i < tabs.length; i++) {
            tabs[i].classList.remove('active');
        }

        if (clickedElement) {
            clickedElement.classList.add('active');
        }

        // Hide all forms
        var forms = document.querySelectorAll('.auth-form');
        for (var i = 0; i < forms.length; i++) {
            forms[i].style.display = 'none';
        }

        // Show target form
        var targetForm = document.getElementById(tab + '-form') || document.getElementById(tab);
        if (targetForm) {
            targetForm.style.display = 'block';
        }

        // Initialize password toggles after form is shown
        setTimeout(function() {
            window.initializePasswordToggles();
        }, 100);
    };

    // Complete signup validation and submission
    function validateSignupForm() {
        var name = document.getElementById('signup-name').value.trim();
        var email = document.getElementById('signup-email').value.trim();
        var password = document.getElementById('signup-password').value;
        var passwordConfirm = document.getElementById('signup-password-confirm').value;
        var selectedRole = document.getElementById('selected-role').value;
        var termsCheckbox = document.getElementById('terms-agreement');

        var errors = [];

        // Name validation
        if (!name || name.length < 2) {
            errors.push('Full name is required (minimum 2 characters)');
        }

        // Email validation
        var emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        if (!email || !emailRegex.test(email)) {
            errors.push('Please enter a valid email address');
        }

        // Password validation
        if (!password || password.length < 8) {
            errors.push('Password must be at least 8 characters long');
        }

        // Password confirmation
        if (password !== passwordConfirm) {
            errors.push('Passwords do not match');
        }

        // Role validation
        if (!selectedRole) {
            errors.push('Please select your account type');
        }

        // Terms validation
        if (!termsCheckbox || !termsCheckbox.checked) {
            errors.push('Please agree to the Terms and Privacy Policy');
        }

        return errors;
    }

    function showFormErrors(errors) {
        var errorDiv = document.getElementById('error-message');
        if (errors.length > 0) {
            errorDiv.innerHTML = errors.join('<br>');
            errorDiv.style.display = 'block';
        } else {
            errorDiv.style.display = 'none';
        }
    }

    function enableSignupButton() {
        var signupBtn = document.getElementById('signup-btn');
        var selectedRole = document.getElementById('selected-role').value;
        var termsCheckbox = document.getElementById('terms-agreement');

        if (selectedRole && termsCheckbox && termsCheckbox.checked) {
            signupBtn.disabled = false;
        } else {
            signupBtn.disabled = true;
        }
    }

    // Initialize page when DOM is ready - complete functionality
    function initializePage() {
        console.log('Initializing complete auth page functionality...');

        try {
            // Initialize password toggles first
            window.initializePasswordToggles();

            // Set default tab state
            document.getElementById('signin-form').style.display = 'block';
            document.getElementById('signup-choice').style.display = 'none';
            document.getElementById('signup-form').style.display = 'none';

            // Set up complete form handlers
            var signinForm = document.getElementById('signin-form');
            var signupForm = document.getElementById('signup-form');
            var termsCheckbox = document.getElementById('terms-agreement');

            // Terms checkbox handler
            if (termsCheckbox) {
                termsCheckbox.addEventListener('change', enableSignupButton);
            }

            // Signin form handler
            if (signinForm) {
                signinForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    var email = document.getElementById('signin-email').value;
                    var password = document.getElementById('signin-password').value;

                    if (!email || !password) {
                        showFormErrors(['Please enter both email and password']);
                        return;
                    }

                    console.log('Signin attempt for:', email);
                    showFormErrors(['Signup functionality is ready. Authentication backend needed.']);
                });
            }

            // Complete signup form handler
            if (signupForm) {
                signupForm.addEventListener('submit', function(e) {
                    e.preventDefault();

                    var errors = validateSignupForm();
                    if (errors.length > 0) {
                        showFormErrors(errors);
                        return;
                    }

                    // If validation passes, show success
                    var name = document.getElementById('signup-name').value;
                    var email = document.getElementById('signup-email').value;
                    var role = document.getElementById('selected-role').value;

                    console.log('Signup successful for:', { name: name, email: email, role: role });

                    // Show success message
                    var successDiv = document.getElementById('success-message');
                    successDiv.innerHTML = 'Account validation successful! All signup flows are working. Ready for backend integration.';
                    successDiv.style.display = 'block';

                    // Hide error message
                    document.getElementById('error-message').style.display = 'none';

                    // Reset form after successful validation
                    setTimeout(function() {
                        signupForm.reset();
                        document.getElementById('selected-role').value = '';
                        document.getElementById('role-display').textContent = '';
                        switchTab('signin', document.querySelector('.auth-tab'));

                        // Pre-fill signin email
                        document.getElementById('signin-email').value = email;

                        successDiv.style.display = 'none';
                    }, 3000);
                });
            }

            console.log('Complete auth page functionality initialized successfully');
        } catch (error) {
            console.error('Auth page initialization error:', error);
            // Continue anyway - don't break the page
        }
    }

    // Cross-browser polyfills and compatibility fixes
    (function() {
        // Polyfill for older browsers
        if (!document.querySelector) {
            document.querySelector = function(selector) {
                return document.getElementById(selector.replace('#', '')) || document.getElementsByClassName(selector.replace('.', ''))[0];
            };
        }

        if (!document.querySelectorAll) {
            document.querySelectorAll = function(selector) {
                if (selector.startsWith('.')) {
                    return document.getElementsByClassName(selector.replace('.', ''));
                }
                return document.getElementsByTagName(selector);
            };
        }

        // IE polyfill for classList
        if (!Element.prototype.classList) {
            Element.prototype.classList = {
                add: function(className) {
                    if (!this.contains(className)) {
                        this.className += ' ' + className;
                    }
                },
                remove: function(className) {
                    this.className = this.className.replace(new RegExp('(^|\\s)' + className + '(\\s|$)'), ' ').trim();
                },
                contains: function(className) {
                    return this.className.indexOf(className) !== -1;
                }
            };
        }

        // Cross-browser event listener
        window.addCrossBrowserEvent = function(element, event, handler) {
            if (element.addEventListener) {
                element.addEventListener(event, handler, false);
            } else if (element.attachEvent) {
                element.attachEvent('on' + event, handler);
            } else {
                element['on' + event] = handler;
            }
        };
    })();

    // Proceed to signup form with selected role
    window.proceedToSignup = function() {
        var selectedRole = document.querySelector('input[name="signup-role"]:checked');

        if (!selectedRole) {
            alert('Please select your account type to continue.');
            return;
        }

        var role = selectedRole.value;

        // Hide the choice screen
        document.getElementById('signup-choice').style.display = 'none';

        // Show the signup form
        document.getElementById('signup-form').style.display = 'block';

        // Set the selected role
        document.getElementById('selected-role').value = role;

        // Update role display
        const roleNames = {
            'student': '🎓 Student',
            'job_seeker': '💼 Job Seeker',
            'recruiter': '🗂️ Recruiter'
        };
        document.getElementById('role-display').textContent = roleNames[role];

        // Generate role-specific fields for AI/ML optimization
        if (typeof generateRoleSpecificFields === 'function') {
            generateRoleSpecificFields(role);
        } else {
            console.log('Role-specific fields generation skipped - function not available');
        }

        // Initialize password toggles and enable signup button
        setTimeout(function() {
            window.initializePasswordToggles();
            enableSignupButton();
        }, 100);
    };

    // Generate role-specific fields optimized for AI/ML matching
    function generateRoleSpecificFields(role) {
        var container = document.getElementById('role-specific-fields');
        var fieldsHTML = '';

        // Cross-browser innerHTML fallback
        function setInnerHTML(element, html) {
            try {
                element.innerHTML = html;
            } catch(e) {
                // IE fallback
                element.outerHTML = '<div id="' + element.id + '">' + html + '</div>';
            }
        }

        if (role === 'student') {
            fieldsHTML = `
                <!-- Student-Specific Fields for AI/ML Optimization -->
                <div class="form-section" style="margin-bottom: 20px; padding: 16px; background: #f8fafc; border-radius: var(--radius); border-left: 4px solid #4a9eff;">
                    <h3 style="color: var(--primary-600); font-size: 16px; margin-bottom: 16px;">📚 Academic Profile (For Better Job Matching)</h3>

                    <div class="form-group">
                        <label class="form-label">University/School</label>
                        <input type="text" class="form-input" id="university" name="university" placeholder="e.g., Stanford University" required>
                        <div class="field-error" id="university-error"></div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Major/Field of Study</label>
                        <input type="text" class="form-input" id="major" name="major" placeholder="e.g., Computer Science, Business" required>
                        <div class="field-error" id="major-error"></div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Graduation Year</label>
                        <select class="form-input" id="graduation-year" name="graduation_year" required>
                            <option value="">Select year...</option>
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                            <option value="2026">2026</option>
                            <option value="2027">2027</option>
                            <option value="2028">2028</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">GPA (Optional - Helps with competitive positions)</label>
                        <input type="number" class="form-input" id="gpa" name="gpa" min="0" max="4" step="0.1" placeholder="3.5">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Skills & Technologies</label>
                        <textarea class="form-input" id="skills" name="skills" placeholder="Python, JavaScript, React, Data Analysis, etc." rows="3" required></textarea>
                        <small style="color: var(--gray-600);">List technical skills, programming languages, tools, etc.</small>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Looking for</label>
                        <select class="form-input" id="opportunity-type" name="opportunity_type" required>
                            <option value="">Select...</option>
                            <option value="internship">Internships</option>
                            <option value="part-time">Part-time jobs</option>
                            <option value="entry-level">Entry-level full-time</option>
                            <option value="co-op">Co-op programs</option>
                            <option value="research">Research positions</option>
                        </select>
                    </div>
                </div>`;

        } else if (role === 'job_seeker') {
            fieldsHTML = `
                <!-- Job Seeker-Specific Fields for AI/ML Optimization -->
                <div class="form-section" style="margin-bottom: 20px; padding: 16px; background: #f8fafc; border-radius: var(--radius); border-left: 4px solid #4a9eff;">
                    <h3 style="color: var(--primary-600); font-size: 16px; margin-bottom: 16px;">💼 Professional Profile (For Precise Job Matching)</h3>

                    <div class="form-group">
                        <label class="form-label">Current Job Title</label>
                        <input type="text" class="form-input" id="current-title" name="current_title" placeholder="e.g., Software Engineer, Marketing Manager" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Years of Experience</label>
                        <select class="form-input" id="experience-years" name="experience_years" required>
                            <option value="">Select...</option>
                            <option value="0-1">0-1 years</option>
                            <option value="1-3">1-3 years</option>
                            <option value="3-5">3-5 years</option>
                            <option value="5-10">5-10 years</option>
                            <option value="10+">10+ years</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Industry</label>
                        <select class="form-input" id="industry" name="industry" required>
                            <option value="">Select industry...</option>
                            <option value="technology">Technology</option>
                            <option value="finance">Finance</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="marketing">Marketing</option>
                            <option value="consulting">Consulting</option>
                            <option value="education">Education</option>
                            <option value="manufacturing">Manufacturing</option>
                            <option value="retail">Retail</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Key Skills & Expertise</label>
                        <textarea class="form-input" id="skills" name="skills" placeholder="Project Management, Python, Sales, Leadership, etc." rows="3" required></textarea>
                        <small style="color: var(--gray-600);">Include both technical and soft skills</small>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Desired Salary Range</label>
                        <select class="form-input" id="salary-range" name="salary_range">
                            <option value="">Prefer not to say</option>
                            <option value="30-50k">$30,000 - $50,000</option>
                            <option value="50-75k">$50,000 - $75,000</option>
                            <option value="75-100k">$75,000 - $100,000</option>
                            <option value="100-150k">$100,000 - $150,000</option>
                            <option value="150k+">$150,000+</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Preferred Work Environment</label>
                        <select class="form-input" id="work-environment" name="work_environment">
                            <option value="remote">Remote</option>
                            <option value="hybrid">Hybrid</option>
                            <option value="onsite">On-site</option>
                            <option value="flexible">Flexible</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Location Preferences</label>
                        <input type="text" class="form-input" id="location" name="location" placeholder="e.g., San Francisco, CA or Remote">
                    </div>
                </div>`;

        } else if (role === 'recruiter') {
            fieldsHTML = `
                <!-- Recruiter-Specific Fields for AI/ML Optimization -->
                <div class="form-section" style="margin-bottom: 20px; padding: 16px; background: #f8fafc; border-radius: var(--radius); border-left: 4px solid #4a9eff;">
                    <h3 style="color: var(--primary-600); font-size: 16px; margin-bottom: 16px;">🗂️ Recruiter Profile (For Smart Candidate Matching)</h3>

                    <div class="form-group">
                        <label class="form-label">Company Name</label>
                        <input type="text" class="form-input" id="company" name="company" placeholder="e.g., Google, Startup Inc." required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Company Size</label>
                        <select class="form-input" id="company-size" name="company_size" required>
                            <option value="">Select...</option>
                            <option value="1-10">1-10 employees</option>
                            <option value="11-50">11-50 employees</option>
                            <option value="51-200">51-200 employees</option>
                            <option value="201-500">201-500 employees</option>
                            <option value="500+">500+ employees</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Industry</label>
                        <select class="form-input" id="company-industry" name="company_industry" required>
                            <option value="">Select industry...</option>
                            <option value="technology">Technology</option>
                            <option value="finance">Finance</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="consulting">Consulting</option>
                            <option value="manufacturing">Manufacturing</option>
                            <option value="retail">Retail</option>
                            <option value="education">Education</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Typical Roles You Hire For</label>
                        <textarea class="form-input" id="hiring-roles" name="hiring_roles" placeholder="Software Engineers, Sales, Marketing, Interns, etc." rows="2" required></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Hiring Volume per Month</label>
                        <select class="form-input" id="hiring-volume" name="hiring_volume" required>
                            <option value="">Select...</option>
                            <option value="1-5">1-5 hires</option>
                            <option value="6-15">6-15 hires</option>
                            <option value="16-30">16-30 hires</option>
                            <option value="30+">30+ hires</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Response Time Commitment</label>
                        <select class="form-input" id="response-time" name="response_time" required>
                            <option value="">Select...</option>
                            <option value="24-hours">Within 24 hours</option>
                            <option value="48-hours">Within 48 hours (GuideSignal Standard)</option>
                            <option value="1-week">Within 1 week</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Company Location</label>
                        <input type="text" class="form-input" id="company-location" name="company_location" placeholder="e.g., San Francisco, CA" required>
                    </div>
                </div>`;
        }

        // Use cross-browser innerHTML method
        setInnerHTML(container, fieldsHTML);
    }

    // Complete role-specific fields generation - 100% signup functionality
    function generateRoleSpecificFields(role) {
        var container = document.getElementById('role-specific-fields');
        if (!container) return;

        var fieldsHTML = '';

        if (role === 'student') {
            fieldsHTML = `
                <div class="form-section" style="margin-bottom: 20px; padding: 16px; background: #f8fafc; border-radius: 8px; border-left: 4px solid #4a9eff;">
                    <h3 style="color: #4a9eff; font-size: 16px; margin-bottom: 16px;">🎓 Student Information</h3>

                    <div class="form-group">
                        <label class="form-label">University/School</label>
                        <input type="text" class="form-input" id="university" name="university" placeholder="e.g., Stanford University" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Major/Field of Study</label>
                        <input type="text" class="form-input" id="major" name="major" placeholder="e.g., Computer Science, Business" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Expected Graduation Year</label>
                        <select class="form-input" id="graduation-year" name="graduation_year" required>
                            <option value="">Select year...</option>
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                            <option value="2026">2026</option>
                            <option value="2027">2027</option>
                            <option value="2028">2028</option>
                            <option value="2029">2029</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">What are you looking for?</label>
                        <select class="form-input" id="opportunity-type" name="opportunity_type" required>
                            <option value="">Select...</option>
                            <option value="internship">Internships</option>
                            <option value="part-time">Part-time jobs</option>
                            <option value="entry-level">Entry-level full-time</option>
                            <option value="co-op">Co-op programs</option>
                        </select>
                    </div>
                </div>`;
        } else if (role === 'job_seeker') {
            fieldsHTML = `
                <div class="form-section" style="margin-bottom: 20px; padding: 16px; background: #f8fafc; border-radius: 8px; border-left: 4px solid #4a9eff;">
                    <h3 style="color: #4a9eff; font-size: 16px; margin-bottom: 16px;">💼 Professional Information</h3>

                    <div class="form-group">
                        <label class="form-label">Current/Most Recent Job Title</label>
                        <input type="text" class="form-input" id="current-title" name="current_title" placeholder="e.g., Software Engineer, Marketing Manager" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Years of Experience</label>
                        <select class="form-input" id="experience-years" name="experience_years" required>
                            <option value="">Select...</option>
                            <option value="0-1">0-1 years</option>
                            <option value="1-3">1-3 years</option>
                            <option value="3-5">3-5 years</option>
                            <option value="5-10">5-10 years</option>
                            <option value="10+">10+ years</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Industry</label>
                        <select class="form-input" id="industry" name="industry" required>
                            <option value="">Select industry...</option>
                            <option value="technology">Technology</option>
                            <option value="finance">Finance</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="marketing">Marketing</option>
                            <option value="consulting">Consulting</option>
                            <option value="education">Education</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Preferred Work Environment</label>
                        <select class="form-input" id="work-environment" name="work_environment" required>
                            <option value="">Select...</option>
                            <option value="remote">Remote</option>
                            <option value="hybrid">Hybrid</option>
                            <option value="onsite">On-site</option>
                            <option value="flexible">Flexible</option>
                        </select>
                    </div>
                </div>`;
        } else if (role === 'recruiter') {
            fieldsHTML = `
                <div class="form-section" style="margin-bottom: 20px; padding: 16px; background: #f8fafc; border-radius: 8px; border-left: 4px solid #4a9eff;">
                    <h3 style="color: #4a9eff; font-size: 16px; margin-bottom: 16px;">🗂️ Company Information</h3>

                    <div class="form-group">
                        <label class="form-label">Company Name</label>
                        <input type="text" class="form-input" id="company" name="company" placeholder="e.g., Google, Startup Inc." required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Your Job Title</label>
                        <input type="text" class="form-input" id="recruiter-title" name="recruiter_title" placeholder="e.g., HR Manager, Talent Acquisition" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Company Size</label>
                        <select class="form-input" id="company-size" name="company_size" required>
                            <option value="">Select...</option>
                            <option value="1-10">1-10 employees</option>
                            <option value="11-50">11-50 employees</option>
                            <option value="51-200">51-200 employees</option>
                            <option value="201-500">201-500 employees</option>
                            <option value="500+">500+ employees</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Industry</label>
                        <select class="form-input" id="company-industry" name="company_industry" required>
                            <option value="">Select industry...</option>
                            <option value="technology">Technology</option>
                            <option value="finance">Finance</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="consulting">Consulting</option>
                            <option value="manufacturing">Manufacturing</option>
                            <option value="retail">Retail</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Typical Hiring Volume (per month)</label>
                        <select class="form-input" id="hiring-volume" name="hiring_volume" required>
                            <option value="">Select...</option>
                            <option value="1-5">1-5 hires</option>
                            <option value="6-15">6-15 hires</option>
                            <option value="16-30">16-30 hires</option>
                            <option value="30+">30+ hires</option>
                        </select>
                    </div>
                </div>`;
        }

        container.innerHTML = fieldsHTML;
    }

    // Make function globally available
    window.generateRoleSpecificFields = generateRoleSpecificFields;

    // Legacy function for backward compatibility
    window.showSignupForm = function(role) {
        // Set the role and proceed
        document.querySelector(`input[name="signup-role"][value="${role}"]`).checked = true;
        proceedToSignup();
    };

    // Simple initialization when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializePage);
    } else {
        initializePage();
    }

    // Fallback initialization on window load
    window.addEventListener('load', function() {
        setTimeout(initializePage, 100);
    });

    </script>

    <!-- External auth module - loaded after core functions are defined -->
    <script src="assets/auth-optimized.js" defer onerror="console.log('Auth module failed to load - using basic functionality')"></script>
</body>
</html>